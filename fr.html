<head>
    <title>Wiki Map</title>
    <link rel="shortcut icon" href="https://wiki-map.donike.net/images/cropped-logo_icon_sat.ico" type="png" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Donike & Porti" />
    <meta name="description" content="Wikipedia Location Map" />
    <meta name="robots" content="index,follow" />

    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
    <script src="./datos/catalunya.js"></script>
    <script src="./datos/eu_borders.js"></script>
    <script src="./datos/articles_en.js"></script>
    <script src="./datos/articles_cat.js"></script>
    <script src="./datos/articles_es.js"></script>
    <script src="./datos/articles_fr.js"></script>
    <script src="./datos/articles_de.js"></script>
    <script src="./datos/articles_cz.js"></script>

    <link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js"
        charset="utf-8"></script>
    <link rel="stylesheet"
        href="https://rawgit.com/nguyenning/Leaflet.defaultextent/master/dist/leaflet.defaultextent.css" />
    <script src="https://rawgit.com/nguyenning/Leaflet.defaultextent/master/dist/leaflet.defaultextent.js"></script>
    <script src="https://labs.easyblog.it/maps/leaflet-search/src/leaflet-search.js"></script>
    <link rel="stylesheet" href="./css/leaflet-search.css" />
    <link rel="stylesheet" href="./css/MarkerCluster.css" />
    <link rel="stylesheet" href="./css/MarkerCluster.Default.css" />
    <script src="./js/leaflet.markercluster.js"></script>

    <link rel="stylesheet" href="./css/leaflet.groupedlayercontrol.css" />
    <script src="./js/leaflet.groupedlayercontrol.js"></script>

    <link rel="stylesheet" href="https://norkart.github.io/Leaflet-MiniMap/Control.MiniMap.css" />
    <script src="https://norkart.github.io/Leaflet-MiniMap/Control.MiniMap.js" type="text/javascript"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/leaflet2.css" />
    <link rel="stylesheet" href="./css/leaflet-sidebar.css" />
    <script src="https://noerw.github.io/leaflet-sidebar-v2/js/leaflet-sidebar.js"></script>
    <link rel="stylesheet" href="./css/style.css" />

    <style>
.en:before {
        background-image: url(./images/en.png)
    }

    .cat:before {
        background-image: url(./images/catala.png)
    }

    .es:before {
        background-image: url(./images/es.png);
    }

    .fr:before {
        background-image: url(./images/fr.png);
    }

    .de:before {
        background-image: url(./images/de.png);
    }

    .cz:before {
        background-image: url(./images/cz.png);
        
    }

    </style>

<body>
    <div id="sidebar" class="leaflet-sidebar collapsed">
        <!-- Tabs -->
        <div class="leaflet-sidebar-tabs">
            <ul role="tablist">
                <!-- top aligned tabs -->
                <li><a href="#home" role="tab"><img src="images/menu.png"></a></li>
                <li><a href="#lang" role="tab"><img src="images/lang.png"></a></li>
                <li><a href="#layers" role="tab"><img src="images/layers.png"></a></li>
                <li><a href="#search" role="tab"><img src="images/lupa.png"></a></li>
            </ul>

            <ul role="tablist">
                <li><a href="https://donike.net"><img
                            src="https://wiki-map.donike.net/images/cropped-logo_icon_sat.ico"></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="home">
                <h1 class="leaflet-sidebar-header">
                    Wiki Map
                    <div class="leaflet-sidebar-close"><img src="images/cross.png"></a></div>
                </h1>
                <p><strong>What is the Wiki Map about?</strong></p>
                <div class="col-md-12">
                    <div class="info">
                        <i class="icon-info-sign"></i>
                        <span class="extra-info">
                            This map provides the georeferenced wikipedia articles of <strong>5 regions of Europe
                            </strong> in English and in their local languages
                        </span>
                    </div>
                </div>

                <p><strong>What is around?</strong></p>
                <span id="content1">
                    <div id="locator">
                        <!--Here the locator will be added-->
                    </div>
                </span>

                <div>
                    <span id="content2">
                        <p><strong>Zoom in to a country:</strong></p>
                    </span>
                    <span id="content1"><button class="button" id="buttonCat">Catalunya</button>
                        <button class="button" id="buttonEs">España</button>
                        <button class="button" id="buttonFr">France</button></span>
                    <span id="content1"><button class="button" id="buttonDe">Deutschland</button>
                        <button class="button" id="buttonCz">Česka Republika</button></span>

                </div>
            </div>
            <div class="leaflet-sidebar-pane" id="lang">
                <h1 class="leaflet-sidebar-header">Languages<div class="leaflet-sidebar-close"><img
                            src="images/cross.png"></a></div>
                </h1>
                <p><strong>Choose a Language:</strong></p>
                <div id="groupControl">
                    <!--Here the layer control 2 menu will be added-->
                </div>
                <!--  <p><label>
                        <input type="radio" class="leaflet-control-layers-selector" name="leaflet-baselayers"
                            checked="checked">
                        <span>
                            English <img class='foto' src="images/en.png">
                        </span>
                    </label></p>
                <p><label>
                        <input type="radio" id="buttonCat" class="leaflet-control-layers-selector"
                            name="leaflet-baselayers">
                        <span>
                            Català <img class='foto' src="images/catala.png">
                        </span>
                    </label></p>
                <p><label>
                        <input type="radio" class="leaflet-control-layers-selector" name="leaflet-baselayers">
                        <span>
                            Castellano <img class='foto' src="images/es.png">
                        </span>
                    </label></p>
                <p><label>
                        <input type="radio" class="leaflet-control-layers-selector" name="leaflet-baselayers">
                        <span>
                            Français <img class='foto' src="images/fr.png">
                        </span>
                    </label></p>
                <p><label>
                        <input type="radio" class="leaflet-control-layers-selector" name="leaflet-baselayers">
                        <span> Deutsch <img class='foto' src="images/de.png">
                        </span>
                    </label></p>
                <p><label>
                        <input type="radio" class="leaflet-control-layers-selector" name="leaflet-baselayers">
                        <span>
                            Čeština <img class='foto' src="images/cz.png">
                        </span>
                    </label></p> -->

                <div class="lang-menu">
                    <ul>
                        <li>
                            <a href="#" class="fr">Français</a>
                        </li>
                        <li>
                            <a href="index.html" class="en">English</a>
                        </li>
                        <li>
                            <a href="cat.html" class="cat">Català</a>
                        </li>
                        <li>
                            <a href="es.html" class="es">Español</a>
                        </li>
                        <li>
                            <a href="de.html" class="de">Deutsch</a>
                        </li>
                        <li>
                            <a href="cz.html" class="cz">Čeština</a>
                        </li>
                    </ul>
                </div>

            </div>
            <div class="leaflet-sidebar-pane" id="layers">
                <h1 class="leaflet-sidebar-header">Layers<div class="leaflet-sidebar-close"><img
                            src="images/cross.png"></a></div>
                </h1>
                <p><strong>Select a base map:</strong></p>
                <div id="layerControl">
                    <!--Here the layer control menu will be added-->
                </div>

            </div>
            <div class="leaflet-sidebar-pane" id="search">
                <h1 class="leaflet-sidebar-header">Search<div class="leaflet-sidebar-close"><img
                            src="images/cross.png"></a></div>
                </h1>
                <p><strong>Search for an article:</strong></p>
                <div id="searchControl">
                    <!--Here the search will be added-->
                </div>
            </div>
        </div>
    </div>

    <script>
        var map;
        var hibrid, streets, satellite;

        function init() {
            map = L.map('map', { zoomControl: false }).setView([45, 4], 5);
            /*  osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                 maxZoom: 19,
                 minZoom: 1,
                 attribution: 'Open Street Map. Wikipedia. By Donike & Porti © '
             }); */

            hibrid = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYW5uYXBvcnRpIiwiYSI6ImNqcmpqdm5oNjBjZGs0M2x4bW5zMWw3NGMifQ.9kWUs3fzfDZ_391Jt1ZpvQ', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 19,
                minZoom: 1,
                id: 'mapbox/satellite-streets-v11',
                accessToken: 'your.mapbox.access.token',
                attribution: 'Open Street Map. Mapbox. Wikipedia. By Donike & Porti © '
            });
            streets = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYW5uYXBvcnRpIiwiYSI6ImNqcmpqdm5oNjBjZGs0M2x4bW5zMWw3NGMifQ.9kWUs3fzfDZ_391Jt1ZpvQ', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 19,
                minZoom: 1,
                id: 'mapbox/streets-v11',
                accessToken: 'your.mapbox.access.token'
            }).addTo(map);
            satellite = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYW5uYXBvcnRpIiwiYSI6ImNqcmpqdm5oNjBjZGs0M2x4bW5zMWw3NGMifQ.9kWUs3fzfDZ_391Jt1ZpvQ', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 19,
                minZoom: 1,
                id: 'mapbox/satellite-v9',
                accessToken: 'your.mapbox.access.token',
                attribution: 'Mapbox. Wikipedia. By Donike & Porti © '
            });

           /*  var geojsonMarkerOptions = {
                radius: 12,
                fillColor: "#0074d9",
                color: "#f2f2f2",
                weight: 10,
                opacity: 0,
                fillOpacity: 0.8
            }; */

            var geojsonPolygonOptions = {

                color: "#aeaeae",
                weight: 1.7,
                opacity: 1.2,
                fillOpacity: 0
            };

            var customOptions =
            {
                'className': 'popupCustom',
            }

            function onEachFeature(feature, layer) {
                popupContent = "<h2 class ='image'><a target='_blank' href='" + feature.properties.url + "'>" + feature.properties.titles + "</a>"
                    + "</h2>"
                    + "<p class ='image'><a target='_blank' href='" + feature.properties.url + "'><img class ='image' src='" + feature.properties.image + "''></a></p>";
                layer.bindPopup(popupContent, customOptions);
            }

            var icon = L.divIcon({
                className: 'wiki-icon',
                html: "W"
            });

            var layer = L.geoJson(french, {

                pointToLayer: function (feature, latlng) {
                    return L.marker(latlng, { icon: icon });
                },
                attribution: 'Wikipedia',
                onEachFeature: onEachFeature
            });


            var clusters = L.markerClusterGroup({

                spiderfyOnMaxZoom: true,
                showCoverageOnHover: false,
                zoomToBoundsOnClick: true
            });


            clusters.addLayer(layer);
            map.addLayer(clusters);

            /* 
                        var layer1 = L.geoJson(catala, {
            
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: icon });
                            },
                            attribution: 'Wikipedia',
                            onEachFeature: onEachFeature
                        });
            
                        var clusters1 = L.markerClusterGroup({
            
                            spiderfyOnMaxZoom: true,
                            showCoverageOnHover: false,
                            zoomToBoundsOnClick: true
                        });
            
                        clusters1.addLayer(layer1);
            
            
                        var layer3 = L.geoJson(german, {
            
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: icon });
                            },
                            attribution: 'Wikipedia',
                            onEachFeature: onEachFeature
                        });
            
                        var clusters3 = L.markerClusterGroup({
            
                            spiderfyOnMaxZoom: true,
                            showCoverageOnHover: false,
                            zoomToBoundsOnClick: true
                        });
            
                        clusters3.addLayer(layer3);
            
                        var layer2 = L.geoJson(español, {
            
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: icon });
                            },
                            attribution: 'Wikipedia',
                            onEachFeature: onEachFeature
                        });
            
                        var clusters2 = L.markerClusterGroup({
            
                            spiderfyOnMaxZoom: true,
                            showCoverageOnHover: false,
                            zoomToBoundsOnClick: true
                        });
            
                        clusters2.addLayer(layer2);
            
                        var layer4 = L.geoJson(french, {
            
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: icon });
                            },
                            attribution: 'Wikipedia',
                            onEachFeature: onEachFeature
                        });
            
                        var clusters4 = L.markerClusterGroup({
            
                            spiderfyOnMaxZoom: true,
                            showCoverageOnHover: false,
                            zoomToBoundsOnClick: true
                        });
            
                        clusters4.addLayer(layer4);
            
                        var layer5 = L.geoJson(czech, {
            
                            pointToLayer: function (feature, latlng) {
                                return L.marker(latlng, { icon: icon });
                            },
                            attribution: 'Wikipedia',
                            onEachFeature: onEachFeature
                        });
            
                        var clusters5 = L.markerClusterGroup({
            
                            spiderfyOnMaxZoom: true,
                            showCoverageOnHover: false,
                            zoomToBoundsOnClick: true
                        });
            
                        clusters5.addLayer(layer5);          
             */

            var eu = L.geoJson(borders, {
                style: geojsonPolygonOptions
            });

            var cat = L.geoJson(catalunya, {
                style: geojsonPolygonOptions
            });

            var layerGroup = L.layerGroup([cat, eu]);
            layerGroup.addTo(map);


            var baseMaps = {
                "Streets": streets,
                "Hybrid": hibrid,
                "Imagery": satellite,

            };
            var overlayMaps = {
                "Borders": layerGroup
            };

            var layers = L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);

            var htmlObject = layers.getContainer();
            var a = document.getElementById('layerControl')
            function setParent(el, newParent) {
                newParent.appendChild(el);
            }
            setParent(htmlObject, a);


            /* var groupedOverlays = {
                "Choose a Language:": {
                    "Català <img class='foto' src='images/catala.png'>": clusters,
                    "English <img class='foto' src='images/en.png'>": clusters1,
                    "Deutsch <img class='foto' src='images/de.png'>": clusters3,
                    "Español <img class='foto' src='images/es.png'>": clusters2,
                    "Français <img class='foto' src='images/fr.png'>": clusters4,
                    "Čeština <img class='foto' src='images/cz.png'>": clusters5,

                }

            };

            var options = {
                // Make the "Landmarks" group exclusive (use radio inputs)
                exclusiveGroups: ["Choose a Language:"],
                // Show a checkbox next to non-exclusive group labels for toggling all
                groupCheckboxes: true,
                collapsed: false
            };

            // Use the custom grouped layer control, not "L.control.layers"
            var layerControl = L.control.groupedLayers(null, groupedOverlays, options);
            map.addControl(layerControl);
            // End of switcher control.

            var htmlObject = layerControl.getContainer();
            var a = document.getElementById('groupControl')
            function setParent(el, newParent) {
                newParent.appendChild(el);
            }
            setParent(htmlObject, a);
 */


            var searchControl = new L.Control.Search({
                collapsed: false,
                layer: clusters,
                textPlaceholder: 'Type here...',
                propertyName: 'titles',
                marker: false,
                firstTipSubmit: true,
                moveToLocation: function (latlng) {

                    map.setView(latlng, 18);
                }
            }).addTo(map);

            var htmlObject = searchControl.getContainer();
            var a = document.getElementById('searchControl')
            function setParent(el, newParent) {
                newParent.appendChild(el);
            }
            setParent(htmlObject, a);

            L.control.zoom({ position: 'topright' }).addTo(map);
        
            L.control.defaultExtent({ position: 'topright' }).addTo(map);

            L.control.locate({ position: 'topright' }).addTo(map);

            var locateControl = L.control.locate().addTo(map);

            var htmlObject = locateControl.getContainer();
            var a = document.getElementById('locator')
            function setParent(el, newParent) {
                newParent.appendChild(el);
            }
            setParent(htmlObject, a);

            satellite2 = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYW5uYXBvcnRpIiwiYSI6ImNqcmpqdm5oNjBjZGs0M2x4bW5zMWw3NGMifQ.9kWUs3fzfDZ_391Jt1ZpvQ', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 19,
                minZoom: 1,
                id: 'mapbox/satellite-v9',
                accessToken: 'your.mapbox.access.token',
                attribution: 'Mapbox. Wikipedia. By Donike & Porti © '
            });

            var miniMap = new L.Control.MiniMap(satellite2, { toggleDisplay: true }).addTo(map);

            controlEscala = L.control.scale({ position: 'bottomright' });
            controlEscala.addTo(map);

            var sidebar = L.control.sidebar({ container: 'sidebar' })
                .addTo(map)

            document.getElementById("buttonCat").addEventListener("click", function () {
                map.flyTo([41.84, 1.3], 8, {
                    animate: true,
                    duration: 2
                });
            });

            document.getElementById("buttonEs").addEventListener("click", function () {
                map.flyTo([40, -5], 6.5, {
                    animate: true,
                    duration: 2
                });
            });


            document.getElementById("buttonFr").addEventListener("click", function () {
                map.flyTo([47, -1], 6.5, {
                    animate: true,
                    duration: 2
                });
            });

            document.getElementById("buttonDe").addEventListener("click", function () {
                map.flyTo([51, 9], 6.5, {
                    animate: true,
                    duration: 2
                });
            });


            document.getElementById("buttonCz").addEventListener("click", function () {
                map.flyTo([50, 14.5], 7.5, {
                    animate: true,
                    duration: 2
                });
            });
        }


    </script>
    </head>

    <body onLoad="init()">

        <div id="map"></div>
    </body>

    </html>